var assert = require('assert')
var emailsender = require('../dist/index')
var sender = new emailsender({
  host: 'smtp.163.com',
  port: 465,
  secure: true,
  auth: {
    user: 'youthschina@163.com',
    pass: ''
  }
})
var mailOptions = {
  subject: 'Test Email',
  from: 'youthschina@163.com',
  to: 'admin@youths.cc',
  text: 'please ignore this email'
}

describe('Send Email', function() {

  describe('use callback', function() {
    it('info should be not null', function(done) {
      sender.send(mailOptions, function(err, info) {
        assert(info)
        done()
      })
    })
  })

  describe('use promise', function() {
    it('info should be not null', function(done) {
      sender.promise().send(mailOptions).then(function(info) {
        assert(info)
        done()
      })
    })
  })

})
